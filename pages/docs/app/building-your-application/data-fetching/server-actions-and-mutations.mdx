---
title: Server Actions and Mutations
nav_title: Server Actions and Mutations
description: Learn how to handle form submissions and data mutations with Next.js.
related:
  description: Learn how to configure Server Actions in Next.js
  links:
    - app/api-reference/next-config-js/serverActions
---

# Server Actions and Mutations

[Server Actions](https://react.dev/reference/rsc/server-actions)ëŠ” Next.js ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ í¼ ì œì¶œ ë° ë°ì´í„° ë³€ì¡°ë¥¼ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ ì„œë²„ì—ì„œ ì‹¤í–‰ë˜ëŠ” **ë¹„ë™ê¸° í•¨ìˆ˜**ì…ë‹ˆë‹¤. ì´ë“¤ì€ Server ë° Client Componentsì—ì„œ í˜¸ì¶œë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

> **ğŸ¥ ì‹œì²­:** Server Actionsë¥¼ ì‚¬ìš©í•œ ë³€ì¡°ì— ëŒ€í•´ ë” ì•Œì•„ë³´ê¸° â†’ [YouTube (10ë¶„)](https://youtu.be/dDpZfOQBMaU?si=cJZHlUu_jFhCzHUg).

## Convention

Server Actionì€ React [`"use server"`](https://react.dev/reference/react/use-server) ì§€ì‹œì–´ë¡œ ì •ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. `async` í•¨ìˆ˜ ìƒë‹¨ì— ì§€ì‹œì–´ë¥¼ ì¶”ê°€í•˜ì—¬ í•´ë‹¹ í•¨ìˆ˜ë¥¼ Server Actionìœ¼ë¡œ í‘œì‹œí•˜ê±°ë‚˜, ë³„ë„ì˜ íŒŒì¼ ìƒë‹¨ì— ì§€ì‹œì–´ë¥¼ ì¶”ê°€í•˜ì—¬ í•´ë‹¹ íŒŒì¼ì˜ ëª¨ë“  ë‚´ë³´ë‚´ê¸°ë¥¼ Server Actionìœ¼ë¡œ í‘œì‹œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### Server Components

Server ComponentsëŠ” ì¸ë¼ì¸ í•¨ìˆ˜ ë ˆë²¨ ë˜ëŠ” ëª¨ë“ˆ ë ˆë²¨ì˜ `"use server"` ì§€ì‹œì–´ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Server Actionì„ ì¸ë¼ì¸ìœ¼ë¡œ ì¶”ê°€í•˜ë ¤ë©´, í•¨ìˆ˜ ë³¸ë¬¸ ìƒë‹¨ì— `"use server"`ë¥¼ ì¶”ê°€í•˜ì„¸ìš”:

```tsx filename="app/page.tsx" switcher
export default function Page() {
  // Server Action
  async function create() {
    "use server";
    // ë°ì´í„° ë³€ì¡°
  }

  return "...";
}
```

```jsx filename="app/page.jsx" switcher
export default function Page() {
  // Server Action
  async function create() {
    "use server";
    // ë°ì´í„° ë³€ì¡°
  }

  return "...";
}
```

### Client Components

Client Componentì—ì„œ Server Actionì„ í˜¸ì¶œí•˜ë ¤ë©´ ìƒˆ íŒŒì¼ì„ ìƒì„±í•˜ê³  íŒŒì¼ ìƒë‹¨ì— `"use server"` ì§€ì‹œì–´ë¥¼ ì¶”ê°€í•˜ì„¸ìš”. íŒŒì¼ ë‚´ì˜ ëª¨ë“  í•¨ìˆ˜ëŠ” Server ë° Client Componentsì—ì„œ ì¬ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” Server Actionsë¡œ í‘œì‹œë©ë‹ˆë‹¤:

```tsx filename="app/actions.ts" switcher
"use server";

export async function create() {}
```

```js filename="app/actions.js" switcher
"use server";

export async function create() {}
```

```tsx filename="app/ui/button.tsx" switcher
"use client";

import { create } from "@/app/actions";

export function Button() {
  return <Button onClick={create} />;
}
```

```jsx filename="app/ui/button.js" switcher
"use client";

import { create } from "@/app/actions";

export function Button() {
  return <Button onClick={create} />;
}
```

### Passing actions as props

Server Actionì„ Client Componentì— propìœ¼ë¡œ ì „ë‹¬í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤:

```jsx
<ClientComponent updateItemAction={updateItem} />
```

```tsx filename="app/client-component.tsx" switcher
"use client";

export default function ClientComponent({
  updateItemAction,
}: {
  updateItemAction: (formData: FormData) => void;
}) {
  return <form action={updateItemAction}>{/* ... */}</form>;
}
```

```jsx filename="app/client-component.jsx" switcher
"use client";

export default function ClientComponent({ updateItemAction }) {
  return <form action={updateItemAction}>{/* ... */}</form>;
}
```

ë³´í†µ Next.js TypeScript í”ŒëŸ¬ê·¸ì¸ì€ `client-component.tsx`ì—ì„œ `updateItemAction`ì´ ì§ë ¬í™”í•  ìˆ˜ ì—†ëŠ” í•¨ìˆ˜ì´ê¸° ë•Œë¬¸ì— ì´ë¥¼ í”Œë˜ê·¸ë¡œ í‘œì‹œí•©ë‹ˆë‹¤.
í•˜ì§€ë§Œ `action` ë˜ëŠ” `Action`ìœ¼ë¡œ ëë‚˜ëŠ” propsëŠ” Server Actionsë¥¼ ë°›ëŠ” ê²ƒìœ¼ë¡œ ê°„ì£¼ë©ë‹ˆë‹¤.
ì´ê²ƒì€ TypeScript í”ŒëŸ¬ê·¸ì¸ì´ ì‹¤ì œë¡œ Server Actionì¸ì§€ ì¼ë°˜ í•¨ìˆ˜ì¸ì§€ ì•Œì§€ ëª»í•˜ê¸° ë•Œë¬¸ì— ì‚¬ìš©í•˜ëŠ” ì¶”ì¸¡ì…ë‹ˆë‹¤.
ëŸ°íƒ€ì„ íƒ€ì… ì²´í¬ëŠ” ì‹¤ìˆ˜ë¡œ Client Componentì— í•¨ìˆ˜ë¥¼ ì „ë‹¬í•˜ì§€ ì•Šë„ë¡ ë³´ì¥í•©ë‹ˆë‹¤.

## Behavior

- Server ActionsëŠ” [`<form>` ìš”ì†Œ](#forms)ì—ì„œ `action` ì†ì„±ì„ ì‚¬ìš©í•˜ì—¬ í˜¸ì¶œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:
  - Server ComponentsëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ì ì§„ì  í–¥ìƒì„ ì§€ì›í•˜ë¯€ë¡œ JavaScriptê°€ ì•„ì§ ë¡œë“œë˜ì§€ ì•Šì•˜ê±°ë‚˜ ë¹„í™œì„±í™”ëœ ê²½ìš°ì—ë„ í¼ì´ ì œì¶œë©ë‹ˆë‹¤.
  - Client Componentsì—ì„œëŠ” Server Actionsë¥¼ í˜¸ì¶œí•˜ëŠ” í¼ì´ JavaScriptê°€ ì•„ì§ ë¡œë“œë˜ì§€ ì•Šì€ ê²½ìš° ì œì¶œì„ ëŒ€ê¸°í•˜ì—¬ í´ë¼ì´ì–¸íŠ¸ í•˜ì´ë“œë ˆì´ì…˜ì„ ìš°ì„ ì‹œí•©ë‹ˆë‹¤.
  - í•˜ì´ë“œë ˆì´ì…˜ í›„, í¼ ì œì¶œ ì‹œ ë¸Œë¼ìš°ì €ê°€ ìƒˆë¡œ ê³ ì¹¨ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
- Server ActionsëŠ” `<form>`ì—ë§Œ êµ­í•œë˜ì§€ ì•Šìœ¼ë©°, ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬, `useEffect`, ì„œë“œíŒŒí‹° ë¼ì´ë¸ŒëŸ¬ë¦¬ ë° `<button>`ê³¼ ê°™ì€ ë‹¤ë¥¸ í¼ ìš”ì†Œì—ì„œë„ í˜¸ì¶œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- Server ActionsëŠ” Next.js [ìºì‹± ë° ì¬ê²€ì¦](/docs/app/building-your-application/caching) ì•„í‚¤í…ì²˜ì™€ í†µí•©ë©ë‹ˆë‹¤. ì•¡ì…˜ì´ í˜¸ì¶œë˜ë©´ Next.jsëŠ” ë‹¨ì¼ ì„œë²„ ë¼ìš´ë“œíŠ¸ë¦½ì—ì„œ ì—…ë°ì´íŠ¸ëœ UIì™€ ìƒˆë¡œìš´ ë°ì´í„°ë¥¼ ë°˜í™˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ë°±ê·¸ë¼ìš´ë“œì—ì„œëŠ” ì•¡ì…˜ì´ `POST` ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ë©°, ì´ HTTP ë©”ì„œë“œë§Œ ì•¡ì…˜ì„ í˜¸ì¶œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- Server Actionsì˜ ì¸ìˆ˜ì™€ ë°˜í™˜ ê°’ì€ Reactì— ì˜í•´ ì§ë ¬í™”í•  ìˆ˜ ìˆì–´ì•¼ í•©ë‹ˆë‹¤. ì§ë ¬í™” ê°€ëŠ¥í•œ ì¸ìˆ˜ ë° ê°’ì„ ë³´ë ¤ë©´ React ë¬¸ì„œë¥¼ ì°¸ì¡°í•˜ì„¸ìš” [ì§ë ¬í™” ê°€ëŠ¥í•œ ì¸ìˆ˜ ë° ê°’](https://react.dev/reference/react/use-server#serializable-parameters-and-return-values).
- Server ActionsëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤. ì´ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ ì–´ë””ì—ì„œë‚˜ ì¬ì‚¬ìš©í•  ìˆ˜ ìˆìŒì„ ì˜ë¯¸í•©ë‹ˆë‹¤.
- Server ActionsëŠ” ì‚¬ìš©ë˜ëŠ” í˜ì´ì§€ë‚˜ ë ˆì´ì•„ì›ƒì—ì„œ [ëŸ°íƒ€ì„](/docs/app/building-your-application/rendering/edge-and-nodejs-runtimes)ì„ ìƒì†ë°›ìŠµë‹ˆë‹¤.
- Server ActionsëŠ” ì‚¬ìš©ë˜ëŠ” í˜ì´ì§€ë‚˜ ë ˆì´ì•„ì›ƒì—ì„œ [Route Segment Config](/docs/app/api-reference/file-conventions/route-segment-config)ë¥¼ ìƒì†ë°›ì•„ `maxDuration`ê³¼ ê°™ì€ í•„ë“œë¥¼ í¬í•¨í•©ë‹ˆë‹¤.

## Examples

### Forms

ReactëŠ” HTML [`<form>`](https://developer.mozilla.org/docs/Web/HTML/Element/form) ìš”ì†Œë¥¼ í™•ì¥í•˜ì—¬ `action` propìœ¼ë¡œ Server Actionsë¥¼ í˜¸ì¶œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

í¼ì—ì„œ í˜¸ì¶œë  ë•Œ, ì•¡ì…˜ì€ ìë™ìœ¼ë¡œ [`FormData`](https://developer.mozilla.org/docs/Web/API/FormData/FormData) ê°ì²´ë¥¼ ë°›ìŠµë‹ˆë‹¤. í•„ë“œë¥¼ ê´€ë¦¬í•˜ê¸° ìœ„í•´ React `useState`ë¥¼ ì‚¬ìš©í•  í•„ìš” ì—†ì´, ê¸°ë³¸ [`FormData` ë©”ì„œë“œ](https://developer.mozilla.org/en-US/docs/Web/API/FormData#instance_methods)ë¥¼ ì‚¬ìš©í•˜ì—¬ ë°ì´í„°ë¥¼ ì¶”ì¶œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

```tsx filename="app/invoices/page.tsx" switcher
export default function Page() {
  async function createInvoice(formData: FormData) {
    "use server";

    const rawFormData = {
      customerId: formData.get("customerId"),
      amount: formData.get("amount"),
      status: formData.get("status"),
    };

    // ë°ì´í„° ë³€ì¡°
    // ìºì‹œ ì¬ê²€ì¦
  }

  return <form action={createInvoice}>...</form>;
}
```

```jsx filename="app/invoices/page.jsx" switcher
export default function Page() {
  async function createInvoice(formData) {
    "use server";

    const rawFormData = {
      customerId: formData.get("customerId"),
      amount: formData.get("amount"),
      status: formData.get("status"),
    };

    // ë°ì´í„° ë³€ì¡°
    // ìºì‹œ ì¬ê²€ì¦
  }

  return <form action={createInvoice}>...</form>;
}
```

> **ì•Œì•„ë‘ë©´ ì¢‹ì€ ì •ë³´:**
>
> - ì˜ˆì‹œ: [ë¡œë”© ë° ì˜¤ë¥˜ ìƒíƒœë¥¼ í¬í•¨í•œ í¼](https://github.com/vercel/next.js/tree/canary/examples/next-forms)
> - í•„ë“œê°€ ë§ì€ í¼ì„ ì‘ì—…í•  ë•ŒëŠ”, JavaScriptì˜ [`Object.fromEntries()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/fromEntries) ë©”ì„œë“œì™€ [`entries()`](https://developer.mozilla.org/en-US/docs/Web/API/FormData/entries) ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ë°ì´í„°ë¥¼ ì¶”ì¶œí•˜ëŠ” ê²ƒì„ ê³ ë ¤í•´ë³´ì„¸ìš”. ì˜ˆ: `const rawFormData = Object.fromEntries(formData)`. ì£¼ì˜í•  ì ì€ `formData`ì— ì¶”ê°€ì ì¸ `$ACTION_` ì†ì„±ì´ í¬í•¨ë  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤.
> - ë” ì•Œì•„ë³´ë ¤ë©´ [React `<form>` ë¬¸ì„œ](https://react.dev/reference/react-dom/components/form#handle-form-submission-with-a-server-action)ë¥¼ ì°¸ì¡°í•˜ì„¸ìš”.

### Passing additional arguments

JavaScript `bind` ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ Server Actionì— ì¶”ê°€ ì¸ìˆ˜ë¥¼ ì „ë‹¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```tsx filename="app/client-component.tsx" highlight={6} switcher
"use client";

import { updateUser } from "./actions";

export function UserProfile({ userId }: { userId: string }) {
  const updateUserWithId = updateUser.bind(null, userId);

  return (
    <form action={updateUserWithId}>
      <input type="text" name="name" />
      <button type="submit">Update User Name</button>
    </form>
  );
}
```

```jsx filename="app/client-component.js" highlight={6} switcher
"use client";

import { updateUser } from "./actions";

export function UserProfile({ userId }) {
  const updateUserWithId = updateUser.bind(null, userId);

  return (
    <form action={updateUserWithId}>
      <input type="text" name="name" />
      <button type="submit">Update User Name</button>
    </form>
  );
}
```

Server Actionì€ í¼ ë°ì´í„° ì™¸ì— `userId` ì¸ìˆ˜ë¥¼ ë°›ìŠµë‹ˆë‹¤:

```js filename="app/actions.js"
"use server";

export async function updateUser(userId, formData) {}
```

> **ì•Œì•„ë‘ë©´ ì¢‹ì€ ì •ë³´**:
>
> - ëŒ€ì•ˆìœ¼ë¡œëŠ” í¼ì— ìˆ¨ê²¨ì§„ ì…ë ¥ í•„ë“œë¡œ ì¸ìˆ˜ë¥¼ ì „ë‹¬í•˜ëŠ” ë°©ë²•ì´ ìˆìŠµë‹ˆë‹¤ (ì˜ˆ: `<input type="hidden" name="userId" value={userId} />`). í•˜ì§€ë§Œ ì´ ê°’ì€ ë Œë”ëœ HTMLì˜ ì¼ë¶€ê°€ ë˜ì–´ ì¸ì½”ë”©ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
> - `.bind`ëŠ” Server ë° Client Components ëª¨ë‘ì—ì„œ ì‘ë™í•©ë‹ˆë‹¤. ë˜í•œ ì ì§„ì  í–¥ìƒë„ ì§€ì›í•©ë‹ˆë‹¤.

### Nested form elements

`<form>` ë‚´ë¶€ì— ìˆëŠ” `<button>`, `<input type="submit">`, `<input type="image">`ì™€ ê°™ì€ ìš”ì†Œì— Server Actionì„ í˜¸ì¶œí•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ ìš”ì†Œë“¤ì€ `formAction` propì´ë‚˜ [ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬](#event-handlers)ë¥¼ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì´ ë°©ë²•ì€ í¼ ë‚´ì—ì„œ ì—¬ëŸ¬ ì„œë²„ ì•¡ì…˜ì„ í˜¸ì¶œí•˜ë ¤ëŠ” ê²½ìš° ìœ ìš©í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ê²Œì‹œë¬¼ì„ ì €ì¥í•˜ëŠ” ë²„íŠ¼ì„ ì¶”ê°€ë¡œ ìƒì„±í•˜ì—¬ ê²Œì‹œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìì„¸í•œ ë‚´ìš©ì€ [React `<form>` ë¬¸ì„œ](https://react.dev/reference/react-dom/components/form#handling-multiple-submission-types)ë¥¼ ì°¸ì¡°í•˜ì„¸ìš”.

### Programmatic form submission

[`requestSubmit()`](https://developer.mozilla.org/en-US/docs/Web/API/HTMLFormElement/requestSubmit) ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ í”„ë¡œê·¸ë¨ì ìœ¼ë¡œ í¼ ì œì¶œì„ íŠ¸ë¦¬ê±°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ì‚¬ìš©ìê°€ `âŒ˜` + `Enter` í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤ë¥¼ ì‚¬ìš©í•˜ì—¬ í¼ì„ ì œì¶œí•  ë•Œ `onKeyDown` ì´ë²¤íŠ¸ë¥¼ ê°ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

```tsx filename="app/entry.tsx" switcher
"use client";

export function Entry() {
  const handleKeyDown = (e: React.KeyboardEvent<HTMLTextAreaElement>) => {
    if (
      (e.ctrlKey || e.metaKey) &&
      (e.key === "Enter" || e.key === "NumpadEnter")
    ) {
      e.preventDefault();
      e.currentTarget.form?.requestSubmit();
    }
  };

  return (
    <div>
      <textarea name="entry" rows={20} required onKeyDown={handleKeyDown} />
    </div>
  );
}
```

```jsx filename="app/entry.jsx" switcher
"use client";

export function Entry() {
  const handleKeyDown = (e) => {
    if (
      (e.ctrlKey || e.metaKey) &&
      (e.key === "Enter" || e.key === "NumpadEnter")
    ) {
      e.preventDefault();
      e.currentTarget.form?.requestSubmit();
    }
  };

  return (
    <div>
      <textarea name="entry" rows={20} required onKeyDown={handleKeyDown} />
    </div>
  );
}
```

ì´ëŠ” Server Actionì„ í˜¸ì¶œí•˜ëŠ” ê°€ì¥ ê°€ê¹Œìš´ `<form>` ì¡°ìƒì˜ ì œì¶œì„ íŠ¸ë¦¬ê±°í•©ë‹ˆë‹¤.

### Server-side form validation

ê¸°ë³¸ í´ë¼ì´ì–¸íŠ¸ ì¸¡ í¼ ê²€ì¦ì„ ìœ„í•´ `required` ë° `type="email"`ê³¼ ê°™ì€ HTML ê²€ì¦ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.

ë” ê³ ê¸‰ ì„œë²„ ì¸¡ ê²€ì¦ì„ ìœ„í•´ [zod](https://zod.dev/)ì™€ ê°™ì€ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ë°ì´í„° ë³€ì¡° ì „ì— í¼ í•„ë“œë¥¼ ê²€ì¦í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

```tsx filename="app/actions.ts" switcher
"use server";

import { z } from "zod";

const schema = z.object({
  email: z.string({
    invalid_type_error: "Invalid Email",
  }),
});

export default async function createUser(formData: FormData) {
  const validatedFields = schema.safeParse({
    email: formData.get("email"),
  });

  // í¼ ë°ì´í„°ê°€ ìœ íš¨í•˜ì§€ ì•Šì€ ê²½ìš° ì¡°ê¸° ë°˜í™˜
  if (!validatedFields.success) {
    return {
      errors: validatedFields.error.flatten().fieldErrors,
    };
  }

  // ë°ì´í„° ë³€ì¡°
}
```

```jsx filename="app/actions.js" switcher
"use server";

import { z } from "zod";

const schema = z.object({
  email: z.string({
    invalid_type_error: "Invalid Email",
  }),
});

export default async function createsUser(formData) {
  const validatedFields = schema.safeParse({
    email: formData.get("email"),
  });

  // í¼ ë°ì´í„°ê°€ ìœ íš¨í•˜ì§€ ì•Šì€ ê²½ìš° ì¡°ê¸° ë°˜í™˜
  if (!validatedFields.success) {
    return {
      errors: validatedFields.error.flatten().fieldErrors,
    };
  }

  // ë°ì´í„° ë³€ì¡°
}
```

ì„œë²„ì—ì„œ í•„ë“œê°€ ê²€ì¦ë˜ë©´, ì•¡ì…˜ì—ì„œ ì§ë ¬í™” ê°€ëŠ¥í•œ ê°ì²´ë¥¼ ë°˜í™˜í•˜ê³  React [`useActionState`](https://react.dev/reference/react/useActionState) í›…ì„ ì‚¬ìš©í•˜ì—¬ ì‚¬ìš©ìì—ê²Œ ë©”ì‹œì§€ë¥¼ í‘œì‹œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

- ì•¡ì…˜ì„ `useActionState`ì— ì „ë‹¬í•˜ë©´ ì•¡ì…˜ì˜ í•¨ìˆ˜ ì‹œê·¸ë‹ˆì²˜ê°€ ìƒˆë¡œìš´ `prevState` ë˜ëŠ” `initialState` ë§¤ê°œë³€ìˆ˜ë¥¼ ì²« ë²ˆì§¸ ì¸ìˆ˜ë¡œ ë°›ë„ë¡ ë³€ê²½ë©ë‹ˆë‹¤.
- `useActionState`ëŠ” React í›…ì´ë¯€ë¡œ Client Componentì—ì„œë§Œ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.

```tsx filename="app/actions.ts" switcher
"use server";

import { redirect } from "next/navigation";

export async function createUser(prevState: any, formData: FormData) {
  const res = await fetch("https://...");
  const json = await res.json();

  if (!res.ok) {
    return { message: "Please enter a valid email" };
  }

  redirect("/dashboard");
}
```

```jsx filename="app/actions.js" switcher
"use server";

import { redirect } from "next/navigation";

export async function createUser(prevState, formData) {
  const res = await fetch("https://...");
  const json = await res.json();

  if (!res.ok) {
    return { message: "Please enter a valid email" };
  }

  redirect("/dashboard");
}
```

ê·¸ëŸ° ë‹¤ìŒ, `useActionState` í›…ì— ì•¡ì…˜ì„ ì „ë‹¬í•˜ê³  ë°˜í™˜ëœ `state`ë¥¼ ì‚¬ìš©í•˜ì—¬ ì˜¤ë¥˜ ë©”ì‹œì§€ë¥¼ í‘œì‹œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```tsx filename="app/ui/signup.tsx" highlight={11,18-20} switcher
"use client";

import { useActionState } from "react";
import { createUser } from "@/app/actions";

const initialState = {
  message: "",
};

export function Signup() {
  const [state, formAction] = useActionState(createUser, initialState);

  return (
    <form action={formAction}>
      <label htmlFor="email">Email</label>
      <input type="text" id="email" name="email" required />
      {/* ... */}
      <p aria-live="polite">{state?.message}</p>
      <button>Sign up</button>
    </form>
  );
}
```

```jsx filename="app/ui/signup.js" highlight={11,18-20} switcher
"use client";

import { useActionState } from "react";
import { createUser } from "@/app/actions";

const initialState = {
  message: "",
};

export function Signup() {
  const [state, formAction] = useActionState(createUser, initialState);

  return (
    <form action={formAction}>
      <label htmlFor="email">Email</label>
      <input type="text" id="email" name="email" required />
      {/* ... */}
      <p aria-live="polite">{state?.message}</p>
      <button>Sign up</button>
    </form>
  );
}
```

> **ì•Œì•„ë‘ë©´ ì¢‹ì€ ì •ë³´:**
>
> - ë°ì´í„°ë¥¼ ë³€ì¡°í•˜ê¸° ì „ì— ì‚¬ìš©ìê°€ í•´ë‹¹ ì‘ì—…ì„ ìˆ˜í–‰í•  ê¶Œí•œì´ ìˆëŠ”ì§€ í•­ìƒ í™•ì¸í•´ì•¼ í•©ë‹ˆë‹¤. [ì¸ì¦ ë° ê¶Œí•œ ë¶€ì—¬](#authentication-and-authorization)ë¥¼ ì°¸ì¡°í•˜ì„¸ìš”.
> - ì´ˆê¸° React Canary ë²„ì „ì—ì„œëŠ” ì´ APIê°€ React DOMì˜ ì¼ë¶€ì˜€ìœ¼ë©° `useFormState`ë¼ê³  ë¶ˆë ¸ìŠµë‹ˆë‹¤.

### Pending states

[`useActionState`](https://react.dev/reference/react/useActionState) í›…ì€ ì•¡ì…˜ì´ ì‹¤í–‰ë˜ëŠ” ë™ì•ˆ ë¡œë”© ì¸ë””ì¼€ì´í„°ë¥¼ í‘œì‹œí•˜ëŠ” ë° ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” `pending` ìƒíƒœë¥¼ ë…¸ì¶œí•©ë‹ˆë‹¤.

```tsx filename="app/submit-button.tsx" highlight={11,21-23} switcher
"use client";

import { useActionState } from "react";
import { createUser } from "@/app/actions";

const initialState = {
  message: "",
};

export function Signup() {
  const [state, formAction, pending] = useActionState(createUser, initialState);

  return (
    <form action={formAction}>
      <label htmlFor="email">Email</label>
      <input type="text" id="email" name="email" required />
      {/* ... */}
      <p aria-live="polite" className="sr-only">
        {state?.message}
      </p>
      <button aria-disabled={pending} type="submit">
        {pending ? "Submitting..." : "Sign up"}
      </button>
    </form>
  );
}
```

```jsx filename="app/submit-button.jsx" highlight={11,21-23} switcher
"use client";

import { useActionState } from "react";
import { createUser } from "@/app/actions";

const initialState = {
  message: "",
};

export function Signup() {
  const [state, formAction, pending] = useActionState(createUser, initialState);

  return (
    <form action={formAction}>
      <label htmlFor="email">Email</label>
      <input type="text" id="email" name="email" required />
      {/* ... */}
      <p aria-live="polite" className="sr-only">
        {state?.message}
      </p>
      <button aria-disabled={pending} type="submit">
        {pending ? "Submitting..." : "Sign up"}
      </button>
    </form>
  );
}
```

> **ì•Œì•„ë‘ë©´ ì¢‹ì€ ì •ë³´:** íŠ¹ì • í¼ì— ëŒ€í•œ ëŒ€ê¸° ìƒíƒœë¥¼ í‘œì‹œí•˜ë ¤ë©´ [`useFormStatus`](https://react.dev/reference/react-dom/hooks/useFormStatus) í›…ì„ ì‚¬ìš©í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.

### Optimistic updates

React [`useOptimistic`](https://react.dev/reference/react/useOptimistic) í›…ì„ ì‚¬ìš©í•˜ì—¬ Server Actionì´ ì‹¤í–‰ë˜ê¸° ì „ì— UIë¥¼ ë‚™ê´€ì ìœ¼ë¡œ ì—…ë°ì´íŠ¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

```tsx filename="app/page.tsx" switcher
"use client";

import { useOptimistic } from "react";
import { send } from "./actions";

type Message = {
  message: string;
};

export function Thread({ messages }: { messages: Message[] }) {
  const [optimisticMessages, addOptimisticMessage] = useOptimistic<
    Message[],
    string
  >(messages, (state, newMessage) => [...state, { message: newMessage }]);

  const formAction = async (formData) => {
    const message = formData.get("message") as string;
    addOptimisticMessage(message);
    await send(message);
  };

  return (
    <div>
      {optimisticMessages.map((m, i) => (
        <div key={i}>{m.message}</div>
      ))}
      <form action={formAction}>
        <input type="text" name="message" />
        <button type="submit">Send</button>
      </form>
    </div>
  );
}
```

```jsx filename="app/page.jsx" switcher
"use client";

import { useOptimistic } from "react";
import { send } from "./actions";

export function Thread({ messages }) {
  const [optimisticMessages, addOptimisticMessage] = useOptimistic(
    messages,
    (state, newMessage) => [...state, { message: newMessage }]
  );

  const formAction = async (formData) => {
    const message = formData.get("message");
    addOptimisticMessage(message);
    await send(message);
  };

  return (
    <div>
      {optimisticMessages.map((m) => (
        <div>{m.message}</div>
      ))}
      <form action={formAction}>
        <input type="text" name="message" />
        <button type="submit">Send</button>
      </form>
    </div>
  );
}
```

### Event handlers

Server Actionsë¥¼ `<form>` ìš”ì†Œ ë‚´ì—ì„œ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¼ë°˜ì ì´ì§€ë§Œ, `onClick`ê³¼ ê°™ì€ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ë¡œë„ í˜¸ì¶œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ì¢‹ì•„ìš” ìˆ˜ë¥¼ ì¦ê°€ì‹œí‚¤ë ¤ë©´ ë‹¤ìŒê³¼ ê°™ì´ í•©ë‹ˆë‹¤:

```tsx filename="app/like-button.tsx" switcher
"use client";

import { incrementLike } from "./actions";
import { useState } from "react";

export default function LikeButton({ initialLikes }: { initialLikes: number }) {
  const [likes, setLikes] = useState(initialLikes);

  return (
    <>
      <p>Total Likes: {likes}</p>
      <button
        onClick={async () => {
          const updatedLikes = await incrementLike();
          setLikes(updatedLikes);
        }}
      >
        Like
      </button>
    </>
  );
}
```

```jsx filename="app/like-button.js" switcher
"use client";

import { incrementLike } from "./actions";
import { useState } from "react";

export default function LikeButton({ initialLikes }) {
  const [likes, setLikes] = useState(initialLikes);

  return (
    <>
      <p>Total Likes: {likes}</p>
      <button
        onClick={async () => {
          const updatedLikes = await incrementLike();
          setLikes(updatedLikes);
        }}
      >
        Like
      </button>
    </>
  );
}
```

ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ë¥¼ í¼ ìš”ì†Œì— ì¶”ê°€í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, `onChange` ì´ë²¤íŠ¸ë¡œ í¼ í•„ë“œë¥¼ ì €ì¥í•˜ë ¤ë©´ ë‹¤ìŒê³¼ ê°™ì´ í•©ë‹ˆë‹¤:

```tsx filename="app/ui/edit-post.tsx"
"use client";

import { publishPost, saveDraft } from "./actions";

export default function EditPost() {
  return (
    <form action={publishPost}>
      <textarea
        name="content"
        onChange={async (e) => {
          await saveDraft(e.target.value);
        }}
      />
      <button type="submit">Publish</button>
    </form>
  );
}
```

ì´ì™€ ê°™ì´ ì—¬ëŸ¬ ì´ë²¤íŠ¸ê°€ ë¹ ë¥´ê²Œ ì—°ì†ìœ¼ë¡œ ë°œìƒí•  ìˆ˜ ìˆëŠ” ê²½ìš°, ë¶ˆí•„ìš”í•œ Server Action í˜¸ì¶œì„ ë°©ì§€í•˜ê¸° ìœ„í•´ **ë””ë°”ìš´ì‹±**ì„ ê¶Œì¥í•©ë‹ˆë‹¤.

### `useEffect`

React [`useEffect`](https://react.dev/reference/react/useEffect) í›…ì„ ì‚¬ìš©í•˜ì—¬ ì»´í¬ë„ŒíŠ¸ê°€ ë§ˆìš´íŠ¸ë  ë•Œ ë˜ëŠ” ì¢…ì†ì„±ì´ ë³€ê²½ë  ë•Œ Server Actionì„ í˜¸ì¶œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŠ” ì „ì—­ ì´ë²¤íŠ¸ì— ì˜ì¡´í•˜ê±°ë‚˜ ìë™ìœ¼ë¡œ íŠ¸ë¦¬ê±°ë˜ì–´ì•¼ í•˜ëŠ” ë³€ì¡°ì— ìœ ìš©í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ì•± ë‹¨ì¶•í‚¤ë¥¼ ìœ„í•œ `onKeyDown`, ë¬´í•œ ìŠ¤í¬ë¡¤ë§ì„ ìœ„í•œ ì¸í„°ì„¹ì…˜ ì˜µì €ë²„ í›…, ë˜ëŠ” ì»´í¬ë„ŒíŠ¸ê°€ ë§ˆìš´íŠ¸ë  ë•Œ ì¡°íšŒìˆ˜ë¥¼ ì—…ë°ì´íŠ¸í•˜ëŠ” ê²½ìš°ê°€ ìˆìŠµë‹ˆë‹¤:

```tsx filename="app/view-count.tsx" switcher
"use client";

import { incrementViews } from "./actions";
import { useState, useEffect } from "react";

export default function ViewCount({ initialViews }: { initialViews: number }) {
  const [views, setViews] = useState(initialViews);

  useEffect(() => {
    const updateViews = async () => {
      const updatedViews = await incrementViews();
      setViews(updatedViews);
    };

    updateViews();
  }, []);

  return <p>Total Views: {views}</p>;
}
```

```jsx filename="app/view-count.js" switcher
"use client";

import { incrementViews } from "./actions";
import { useState, useEffect } from "react";

export default function ViewCount({ initialViews }) {
  const [views, setViews] = useState(initialViews);

  useEffect(() => {
    const updateViews = async () => {
      const updatedViews = await incrementViews();
      setViews(updatedViews);
    };

    updateViews();
  }, []);

  return <p>Total Views: {views}</p>;
}
```

`useEffect`ì˜ [ë™ì‘ ë° ì£¼ì˜ì‚¬í•­](https://react.dev/reference/react/useEffect#caveats)ì„ ê³ ë ¤í•˜ì„¸ìš”.

### Error Handling

ì˜¤ë¥˜ê°€ ë°œìƒí•˜ë©´ í´ë¼ì´ì–¸íŠ¸ì˜ ê°€ì¥ ê°€ê¹Œìš´ [`error.js`](/docs/app/building-your-application/routing/error-handling) ë˜ëŠ” `<Suspense>` ê²½ê³„ì— ì˜í•´ ì¡í™ë‹ˆë‹¤. UIì—ì„œ ì˜¤ë¥˜ë¥¼ ì²˜ë¦¬í•˜ë ¤ë©´ `try/catch`ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.

ì˜ˆë¥¼ ë“¤ì–´, ìƒˆë¡œìš´ í•­ëª©ì„ ìƒì„±í•˜ëŠ” Server Actionì´ ì˜¤ë¥˜ë¥¼ ì²˜ë¦¬í•˜ì—¬ ë©”ì‹œì§€ë¥¼ ë°˜í™˜í•˜ëŠ” ê²½ìš°:

```ts filename="app/actions.ts" switcher
"use server";

export async function createTodo(prevState: any, formData: FormData) {
  try {
    // ë°ì´í„° ë³€ì¡°
  } catch (e) {
    throw new Error("Failed to create task");
  }
}
```

```js filename="app/actions.js" switcher
"use server";

export async function createTodo(prevState, formData) {
  try {
    //  ë°ì´í„° ë³€ì¡°
  } catch (e) {
    throw new Error("Failed to create task");
  }
}
```

> **ì•Œì•„ë‘ë©´ ì¢‹ì€ ì •ë³´:**
>
> - ì˜¤ë¥˜ë¥¼ ë˜ì§€ëŠ” ê²ƒ ì™¸ì—ë„ `useActionState`ì—ì„œ ì²˜ë¦¬í•  ìˆ˜ ìˆë„ë¡ ê°ì²´ë¥¼ ë°˜í™˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. [ì„œë²„ ì¸¡ ê²€ì¦ ë° ì˜¤ë¥˜ ì²˜ë¦¬](#server-side-form-validation)ë¥¼ ì°¸ì¡°í•˜ì„¸ìš”.

### Revalidating data

[`revalidatePath`](/docs/app/api-reference/functions/revalidatePath) APIë¥¼ ì‚¬ìš©í•˜ì—¬ Server Actions ë‚´ì—ì„œ Next.js ìºì‹œë¥¼ ì¬ê²€ì¦í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

```ts filename="app/actions.ts" switcher
"use server";

import { revalidatePath } from "next/cache";

export async function createPost() {
  try {
    // ...
  } catch (error) {
    // ...
  }

  revalidatePath("/posts");
}
```

```js filename="app/actions.js" switcher
"use server";

import { revalidatePath } from "next/cache";

export async function createPost() {
  try {
    // ...
  } catch (error) {
    // ...
  }

  revalidatePath("/posts");
}
```

ë˜ëŠ” [`revalidateTag`](/docs/app/api-reference/functions/revalidateTag)ë¥¼ ì‚¬ìš©í•˜ì—¬ íŠ¹ì • ë°ì´í„° fetchë¥¼ ìºì‹œ íƒœê·¸ì™€ í•¨ê»˜ ë¬´íš¨í™”í•©ë‹ˆë‹¤:

```ts filename="app/actions.ts" switcher
"use server";

import { revalidateTag } from "next/cache";

export async function createPost() {
  try {
    // ...
  } catch (error) {
    // ...
  }

  revalidateTag("posts");
}
```

```js filename="app/actions.js" switcher
"use server";

import { revalidateTag } from "next/cache";

export async function createPost() {
  try {
    // ...
  } catch (error) {
    // ...
  }

  revalidateTag("posts");
}
```

### Redirecting

Server Action ì™„ë£Œ í›„ ì‚¬ìš©ìë¥¼ ë‹¤ë¥¸ ê²½ë¡œë¡œ

ë¦¬ë””ë ‰ì…˜í•˜ë ¤ë©´ [`redirect`](/docs/app/api-reference/functions/redirect) APIë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. `redirect`ëŠ” `try/catch` ë¸”ë¡ ì™¸ë¶€ì—ì„œ í˜¸ì¶œí•´ì•¼ í•©ë‹ˆë‹¤:

```ts filename="app/actions.ts" switcher
"use server";

import { redirect } from "next/navigation";
import { revalidateTag } from "next/cache";

export async function createPost(id: string) {
  try {
    // ...
  } catch (error) {
    // ...
  }

  revalidateTag("posts"); // ìºì‹œëœ ê²Œì‹œë¬¼ ì—…ë°ì´íŠ¸
  redirect(`/post/${id}`); // ìƒˆë¡œìš´ ê²Œì‹œë¬¼ í˜ì´ì§€ë¡œ ì´ë™
}
```

```js filename="app/actions.js" switcher
"use server";

import { redirect } from "next/navigation";
import { revalidateTag } from "next/cache";

export async function createPost(id) {
  try {
    // ...
  } catch (error) {
    // ...
  }

  revalidateTag("posts"); // ìºì‹œëœ ê²Œì‹œë¬¼ ì—…ë°ì´íŠ¸
  redirect(`/post/${id}`); // ìƒˆë¡œìš´ ê²Œì‹œë¬¼ í˜ì´ì§€ë¡œ ì´ë™
}
```

### Cookies

[`cookies`](/docs/app/api-reference/functions/cookies) APIë¥¼ ì‚¬ìš©í•˜ì—¬ Server Action ë‚´ì—ì„œ ì¿ í‚¤ë¥¼ `get`, `set`, `delete` í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

```ts filename="app/actions.ts" switcher
"use server";

import { cookies } from "next/headers";

export async function exampleAction() {
  // ì¿ í‚¤ ê°€ì ¸ì˜¤ê¸°
  const value = cookies().get("name")?.value;

  // ì¿ í‚¤ ì„¤ì •
  cookies().set("name", "Delba");

  // ì¿ í‚¤ ì‚­ì œ
  cookies().delete("name");
}
```

```js filename="app/actions.js" switcher
"use server";

import { cookies } from "next/headers";

export async function exampleAction() {
  // ì¿ í‚¤ ê°€ì ¸ì˜¤ê¸°
  const value = cookies().get("name")?.value;

  // ì¿ í‚¤ ì„¤ì •
  cookies().set("name", "Delba");

  // ì¿ í‚¤ ì‚­ì œ
  cookies().delete("name");
}
```

Server Actionsì—ì„œ ì¿ í‚¤ë¥¼ ì‚­ì œí•˜ëŠ” [ì¶”ê°€ ì˜ˆì œ](/docs/app/api-reference/functions/cookies#deleting-cookies)ë¥¼ ì°¸ì¡°í•˜ì„¸ìš”.

## Security

### Authentication and authorization

Server Actionsë¥¼ ê³µê°œ API ì—”ë“œí¬ì¸íŠ¸ì²˜ëŸ¼ ì·¨ê¸‰í•˜ê³  ì‚¬ìš©ìê°€ í•´ë‹¹ ì‘ì—…ì„ ìˆ˜í–‰í•  ê¶Œí•œì´ ìˆëŠ”ì§€ í™•ì¸í•´ì•¼ í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´:

```tsx filename="app/actions.ts"
"use server";

import { auth } from "./lib";

export function addItem() {
  const { user } = auth();
  if (!user) {
    throw new Error("You must be signed in to perform this action");
  }

  // ...
}
```

### Closures and encryption

ì»´í¬ë„ŒíŠ¸ ë‚´ì— Server Actionì„ ì •ì˜í•˜ë©´ [í´ë¡œì €](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Closures)ê°€ ìƒì„±ë˜ì–´ ì•¡ì…˜ì´ ì™¸ë¶€ í•¨ìˆ˜ì˜ ìŠ¤ì½”í”„ì— ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, `publish` ì•¡ì…˜ì€ `publishVersion` ë³€ìˆ˜ì— ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

```tsx filename="app/page.tsx" switcher
export default async function Page() {
  const publishVersion = await getLatestVersion();

  async function publish() {
    "use server";
    if (publishVersion !== await getLatestVersion()) {
      throw new Error('The version has changed since pressing publish');
    }
    ...
  }

  return (
    <form>
      <button formAction={publish}>Publish</button>
    </form>
  );
}
```

```jsx filename="app/page.js" switcher
export default async function Page() {
  const publishVersion = await getLatestVersion();

  async function publish() {
    "use server";
    if (publishVersion !== await getLatestVersion()) {
      throw new Error('The version has changed since pressing publish');
    }
    ...
  }

  return (
    <form>
      <button formAction={publish}>Publish</button>
    </form>
  );
}
```

í´ë¡œì €ëŠ” ë Œë”ë§ ì‹œì ì— ë°ì´í„°(`publishVersion`)ì˜ *ìŠ¤ëƒ…ìƒ·*ì„ ìº¡ì²˜í•˜ì—¬ ì•¡ì…˜ì´ í˜¸ì¶œë  ë•Œ ë‚˜ì¤‘ì— ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ë° ìœ ìš©í•©ë‹ˆë‹¤.

ê·¸ëŸ¬ë‚˜ ì´ë¥¼ ìœ„í•´ ìº¡ì²˜ëœ ë³€ìˆ˜ëŠ” í´ë¼ì´ì–¸íŠ¸ë¡œ ì „ì†¡ë˜ì—ˆë‹¤ê°€ ì•¡ì…˜ì´ í˜¸ì¶œë  ë•Œ ì„œë²„ë¡œ ë‹¤ì‹œ ì „ì†¡ë©ë‹ˆë‹¤. ë¯¼ê°í•œ ë°ì´í„°ê°€ í´ë¼ì´ì–¸íŠ¸ì— ë…¸ì¶œë˜ì§€ ì•Šë„ë¡ Next.jsëŠ” í´ë¡œì € ë³€ìˆ˜ë¥¼ ìë™ìœ¼ë¡œ ì•”í˜¸í™”í•©ë‹ˆë‹¤. ìƒˆë¡œìš´ ê°œì¸ í‚¤ëŠ” Next.js ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ë¹Œë“œë  ë•Œë§ˆë‹¤ ê° ì•¡ì…˜ì— ëŒ€í•´ ìƒì„±ë©ë‹ˆë‹¤. ì´ëŠ” íŠ¹ì • ë¹Œë“œì— ëŒ€í•´ì„œë§Œ ì•¡ì…˜ì„ í˜¸ì¶œí•  ìˆ˜ ìˆìŒì„ ì˜ë¯¸í•©ë‹ˆë‹¤.

> **ì•Œì•„ë‘ë©´ ì¢‹ì€ ì •ë³´:** ë¯¼ê°í•œ ê°’ì´ í´ë¼ì´ì–¸íŠ¸ì— ë…¸ì¶œë˜ì§€ ì•Šë„ë¡ ì•”í˜¸í™”ì—ë§Œ ì˜ì¡´í•˜ëŠ” ê²ƒì€ ê¶Œì¥í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ëŒ€ì‹ , [React ì˜¤ì—¼ API](/docs/app/building-your-application/data-fetching/fetching#preventing-sensitive-data-from-being-exposed-to-the-client)ë¥¼ ì‚¬ìš©í•˜ì—¬ íŠ¹ì • ë°ì´í„°ê°€ í´ë¼ì´ì–¸íŠ¸ë¡œ ì „ì†¡ë˜ì§€ ì•Šë„ë¡ ì‚¬ì „ì— ë°©ì§€í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.

### Overwriting encryption keys (advanced)

ì—¬ëŸ¬ ì„œë²„ì— ê±¸ì³ Next.js ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ìì²´ í˜¸ìŠ¤íŒ…í•  ë•Œ ê° ì„œë²„ ì¸ìŠ¤í„´ìŠ¤ëŠ” ì„œë¡œ ë‹¤ë¥¸ ì•”í˜¸í™” í‚¤ë¥¼ ê°€ì§€ê²Œ ë˜ì–´ ì ì¬ì  ë¶ˆì¼ì¹˜ê°€ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì´ë¥¼ ì™„í™”í•˜ê¸° ìœ„í•´ `process.env.NEXT_SERVER_ACTIONS_ENCRYPTION_KEY` í™˜ê²½ ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ì•”í˜¸í™” í‚¤ë¥¼ ë®ì–´ì“¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ë³€ìˆ˜ë¥¼ ì§€ì •í•˜ë©´ ì•”í˜¸í™” í‚¤ê°€ ë¹Œë“œ ê°„ì— ì§€ì†ë˜ë©° ëª¨ë“  ì„œë²„ ì¸ìŠ¤í„´ìŠ¤ê°€ ë™ì¼í•œ í‚¤ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.

ì´ëŠ” ì—¬ëŸ¬ ë°°í¬ ê°„ì— ì¼ê´€ëœ ì•”í˜¸í™” ë™ì‘ì´ ì¤‘ìš”í•œ ê³ ê¸‰ ì‚¬ìš© ì‚¬ë¡€ì…ë‹ˆë‹¤. í‚¤ íšŒì „ ë° ì„œëª…ê³¼ ê°™ì€ í‘œì¤€ ë³´ì•ˆ ê´€í–‰ì„ ê³ ë ¤í•´ì•¼ í•©ë‹ˆë‹¤.

> **ì•Œì•„ë‘ë©´ ì¢‹ì€ ì •ë³´:** Vercelì— ë°°í¬ëœ Next.js ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ì´ë¥¼ ìë™ìœ¼ë¡œ ì²˜ë¦¬í•©ë‹ˆë‹¤.

### Allowed origins (advanced)

Server ActionsëŠ” `<form>` ìš”ì†Œ ë‚´ì—ì„œ í˜¸ì¶œë  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— [CSRF ê³µê²©](https://developer.mozilla.org/en-US/docs/Glossary/CSRF)ì— ë…¸ì¶œë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ë°±ê·¸ë¼ìš´ë“œì—ì„œ Server ActionsëŠ” `POST` ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ë©°, ì´ HTTP ë©”ì„œë“œë§Œ ì•¡ì…˜ì„ í˜¸ì¶œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŠ” [SameSite ì¿ í‚¤](https://web.dev/articles/samesite-cookies-explained)ê°€ ê¸°ë³¸ê°’ì¸ í˜„ëŒ€ ë¸Œë¼ìš°ì €ì—ì„œ ëŒ€ë¶€ë¶„ì˜ CSRF ì·¨ì•½ì ì„ ë°©ì§€í•©ë‹ˆë‹¤.

ì¶”ê°€ì ì¸ ë³´í˜¸ë¥¼ ìœ„í•´, Next.jsì˜ Server ActionsëŠ” [Origin í—¤ë”](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Origin)ë¥¼ [Host í—¤ë”](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Host)(ë˜ëŠ” `X-Forwarded-Host`)ì™€ ë¹„êµí•©ë‹ˆë‹¤. ì´ë“¤ì´ ì¼ì¹˜í•˜ì§€ ì•Šìœ¼ë©´ ìš”ì²­ì´ ì¤‘ë‹¨ë©ë‹ˆë‹¤. ì¦‰, Server ActionsëŠ” ì´ë¥¼ í˜¸ìŠ¤íŒ…í•˜ëŠ” í˜ì´ì§€ì™€ ë™ì¼í•œ í˜¸ìŠ¤íŠ¸ì—ì„œë§Œ í˜¸ì¶œë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ ë˜ëŠ” ë‹¤ê³„ì¸µ ë°±ì—”ë“œ ì•„í‚¤í…ì²˜ë¥¼ ì‚¬ìš©í•˜ëŠ” ëŒ€ê·œëª¨ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ê²½ìš°, ì„œë²„ APIê°€ í”„ë¡œë•ì…˜ ë„ë©”ì¸ê³¼ ë‹¤ë¥¼ ë•Œ `serverActions.allowedOrigins` êµ¬ì„± ì˜µì…˜ì„ ì‚¬ìš©í•˜ì—¬ ì•ˆì „í•œ ì¶œì²˜ ëª©ë¡ì„ ì§€ì •í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤. ì´ ì˜µì…˜ì€ ë¬¸ìì—´ ë°°ì—´ì„ í—ˆìš©í•©ë‹ˆë‹¤.

```js filename="next.config.js"
/** @type {import('next').NextConfig} */
module.exports = {
  experimental: {
    serverActions: {
      allowedOrigins: ["my-proxy.com", "*.my-proxy.com"],
    },
  },
};
```

[ë³´ì•ˆ ë° Server Actions](https://nextjs.org/blog/security-nextjs-server-components-actions)ì— ëŒ€í•´ ë” ì•Œì•„ë³´ì„¸ìš”.

## Additional resources

Server Actionsì— ëŒ€í•œ ìì„¸í•œ ë‚´ìš©ì€ ë‹¤ìŒ React ë¬¸ì„œë¥¼ ì°¸ì¡°í•˜ì„¸ìš”:

- [Server Actions](https://react.dev/reference/rsc/server-actions)
- [`"use server"`](https://react.dev/reference/react/use-server)
- [`<form>`](https://react.dev/reference/react-dom/components/form)
- [`useFormStatus`](https://react.dev/reference/react-dom/hooks/useFormStatus)
- [`useActionState`](https://react.dev/reference/react/useActionState)
- [`useOptimistic`](https://react.dev/reference/react/useOptimistic)
